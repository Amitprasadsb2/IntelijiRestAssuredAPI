{
	"info": {
		"_postman_id": "a490a34e-7855-44f2-987c-cd2f79059a8e",
		"name": "DPC_Test",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_uid": "16366667-a490a34e-7855-44f2-987c-cd2f79059a8e"
	},
	"item": [
		{
			"name": "GETALL",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "9001786e-39ef-47f2-8b6c-35623de9f0d2",
						"exec": [
							"console.log(\"Test the Get/Fetch\");\r",
							"\r",
							"pm.test(\"status code is 200\", function(){\r",
							"    pm.response.to.have.status(200);\r",
							"})\r",
							" const response = pm.response.json();\r",
							"pm.test(\"Get the email from response\", function(){\r",
							"    console.log(response.data[0].email);\r",
							"    pm.expect(response.data[0].email).to.equal(\"george.bluth@reqres.in\")\r",
							"\r",
							"})\r",
							"\r",
							"pm.test(\"Get the total number of users\", function () {\r",
							"    console.log(response.total);\r",
							"    pm.expect(response.total).to.equal(12);\r",
							"})\r",
							"\r",
							"pm.test(\"Get the first user's email\", function () {\r",
							"    console.log(response.data[0].first_name);\r",
							"    pm.expect(response.data[0].first_name).to.equal(\"George\");\r",
							"})\r",
							"\r",
							"pm.test(\"Test the total pages\", function(){\r",
							"    console.log(response.total_pages);\r",
							"    pm.expect(response.total_pages).to.equal(2);\r",
							"\r",
							"})\r",
							"\r",
							"pm.test(\"test the property Response\",function(){\r",
							"    pm.expect(response.data[0]).to.have.property(\"email\")\r",
							"})\r",
							"\r",
							"let userID = response.data[3].id;\r",
							"pm.environment.set(\"userID\",userID);\r",
							"console.log(\"UserID will be \", userID);\r",
							"\r",
							"// pm.test(\"Schema validation\", function(){\r",
							"//     const schema = {\r",
							"//         \"type\" : \"object\",\r",
							"//         \"properties\" : {\"required\"}\r",
							"//     }\r",
							"// })\r",
							"\r",
							"\r",
							"\r",
							"\r",
							"\r",
							"\r",
							"pm.test(\"Test total page in response\", function(){\r",
							"   pm.expect(response.total_pages).to.equal(2);\r",
							"   console.log(response.total_pages);\r",
							"})\r",
							"\r",
							"\r",
							"\r",
							"\r",
							"\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "b19f12ab-839d-4fef-80f8-5a425145b601",
						"exec": [
							"console.log(\"Test the Pre-Request\");\r",
							"console.clear();"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"id": "915d0170-8160-4d57-9be3-0942852004a9",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{baseURL}}/api/users",
					"host": [
						"{{baseURL}}"
					],
					"path": [
						"api",
						"users"
					]
				}
			},
			"response": []
		},
		{
			"name": "GETbyID",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "ce49412f-1573-4ff6-8f16-9714b0c94812",
						"exec": [
							"const response = pm.response.json();",
							"",
							"pm.test(\"Check the ID\", function(){",
							"    const userID = pm.variables.get(\"userID\");",
							"    pm.expect(response.data.id).to.eql(Number(userID));",
							"    console.log(userID);",
							"});",
							"",
							"pm.test(\"Test Schema of response\", function(){",
							"    const schema = {",
							"        \"type\": \"object\",",
							"        \"required\": [\"data\", \"support\", \"_meta\"],",
							"        \"properties\": {",
							"            \"data\": {",
							"                \"type\": \"object\",",
							"                \"required\": [\"id\", \"email\", \"first_name\", \"last_name\", \"avatar\"],",
							"                \"properties\": {",
							"                    \"id\": { \"type\": \"number\" },",
							"                    \"email\": { \"type\": \"string\" },",
							"                    \"first_name\": { \"type\": \"string\" },",
							"                    \"last_name\": { \"type\": \"string\" },",
							"                    \"avatar\": { \"type\": \"string\" }",
							"                }",
							"            },",
							"            \"support\": {",
							"                \"type\": \"object\",",
							"                \"required\": [\"url\", \"text\"],",
							"                \"properties\": {",
							"                    \"url\": { \"type\": \"string\" },",
							"                    \"text\": { \"type\": \"string\" }",
							"                }",
							"            },",
							"            \"_meta\": {",
							"                \"type\": \"object\",",
							"                \"required\": [\"powered_by\", \"upgrade_url\", \"docs_url\", \"template_gallery\", \"message\", \"features\", \"upgrade_cta\"],",
							"                \"properties\": {",
							"                    \"powered_by\": { \"type\": \"string\" },",
							"                    \"upgrade_url\": { \"type\": \"string\" },",
							"                    \"docs_url\": { \"type\": \"string\" },",
							"                    \"template_gallery\": { \"type\": \"string\" },",
							"                    \"message\": { \"type\": \"string\" },",
							"                    \"features\": { \"type\": \"array\" },",
							"                    \"upgrade_cta\": { \"type\": \"string\" }",
							"                }",
							"            }",
							"        }",
							"    };",
							"    ",
							"    const isValid = tv4.validate(response, schema);",
							"    pm.expect(isValid, tv4.error ? \"Schema validation failed: \" + JSON.stringify(tv4.error) : \"Schema is valid\").to.be.true;",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "e5cee99c-f55c-426d-a864-3e4cd03aeb95",
						"exec": [
							"console.clear();"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"id": "ce6c517e-1e65-4487-987d-2cefae9f2f86",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{baseURL}}/api/users/{{userID}}",
					"host": [
						"{{baseURL}}"
					],
					"path": [
						"api",
						"users",
						"{{userID}}"
					],
					"query": [
						{
							"key": "userID",
							"value": "{{userID}}",
							"type": "text",
							"disabled": true
						}
					]
				}
			},
			"response": []
		}
	]
}